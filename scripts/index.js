const items = {
  burgers: {
    "Classic Burger(Large)": {
      category: "Burgers",
      title: "Classic Burger(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1001",
      price: "750.00",
      qty: "20"
    },
    "Classic Burger(Regular)": {
      category: "Burgers",
      title: "Classic Burger(Regular)",
      imgSrc: "resource/cover.jpg",
      code: "B1002",
      price: "1500.00",
      qty: "20"
    },
    "Turkey Burger": {
      category: "Burgers",
      title: "Turkey Burger",
      imgSrc: "resource/cover.jpg",
      code: "B1003",
      price: "1600.00",
      qty: "20"
    },
    "Chicken Burger (Large)": {
      category: "Burgers",
      title: "Chicken Burger (Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1004",
      price: "1400.00",
      qty: "20"
    },
    "Chicken Burger (Regular)": {
      category: "Burgers",
      title: "Chicken Burger (Regular)",
      imgSrc: "resource/cover.jpg",
      code: "B1005",
      price: "800.00",
      qty: "20"
    },
    "Cheese Burger(Large)": {
      category: "Burgers",
      title: "Cheese Burger(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1006",
      price: "1000.00",
      qty: "20"
    },
    "Cheese Buregr(Regular)": {
      category: "Burgers",
      title: "Cheese Burger(Regular)",
      imgSrc: "resource/cover.jpg",
      code: "B1007",
      price: "600.00",
      qty: "20"
    },
    "Bacon Burger": {
      category: "Burgers",
      title: "Bacon Burger",
      imgSrc: "resource/cover.jpg",
      code: "B1008",
      price: "650.00",
      qty: "20"
    },
    "Shawarma Burger": {
      category: "Burgers",
      title: "Shawarma Burger",
      imgSrc: "resource/cover.jpg",
      code: "B1009",
      price: "800.00",
      qty: "20"
    },
    "Olive Burger": {
      category: "Burgers",
      title: "Olive Burger",
      imgSrc: "resource/cover.jpg",
      code: "B1010",
      price: "1800.00",
      qty: "20"
    },
    "Double-Cheese Burger": {
      category: "Burgers",
      title: "Double-Cheese Burger",
      imgSrc: "resource/cover.jpg",
      code: "B1012",
      price: "1250.00",
      qty: "20"
    },
    "Crispy Chicken Burger(Regular)": {
      category: "Burgers",
      title: "Crispy Chicken Burger(Regular)",
      imgSrc: "resource/cover.jpg",
      code: "B1013",
      price: "1200.00",
      qty: "20"
    },
    "Crispy Chicken Burger(Large)": {
      category: "Burgers",
      title: "Crispy Chicken Burger(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1014",
      price: "1600.00",
      qty: "20"
    },
    "Paneer Burger": {
      category: "Burgers",
      title: "Paneer Burger",
      imgSrc: "resource/cover.jpg",
      code: "B1015",
      price: "900.00",
      qty: "20"
    }
  },
  submarine: {
    "Crispy Chicken Submarine(Large)": {
      category: "Submarine",
      title: "Crispy Chicken Submarine(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1016",
      price: "2000.00",
      qty: "20"
    },
    "Crispy Chicken Submarine(Regular)": {
      category: "Submarine",
      title: "Crispy Chicken Submarine(Regular)",
      imgSrc: "resource/cover.jpg",
      code: "B1017",
      price: "1500.00",
      qty: "20"
    },
    "Chicken Submarine(Large)": {
      category: "Submarine",
      title: "Chicken Submarine(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1018",
      price: "1800.00",
      qty: "20"
    },
    "Chicken Submarine(Regular)": {
      category: "Submarine",
      title: "Chicken Submarine(Regular)",
      imgSrc: "resource/cover.jpg",
      code: "B1019",
      price: "1400.00",
      qty: "20"
    },
    "Grinder Submarine": {
      category: "Submarine",
      title: "Grinder Submarine",
      imgSrc: "resource/cover.jpg",
      code: "B1020",
      price: "2300.00",
      qty: "20"
    },
    "Cheese Submarine": {
      category: "Submarine",
      title: "Cheese Submarine",
      imgSrc: "resource/cover.jpg",
      code: "B1021",
      price: "2200.00",
      qty: "20"
    },
    "Double Cheese and Chicken Submarine": {
      category: "Submarine",
      title: "Double Cheese and Chicken Submarine",
      imgSrc: "resource/cover.jpg",
      code: "B1022",
      price: "1900.00",
      qty: "20"
    },
    "Special Horgie Submarine": {
      category: "Submarine",
      title: "Special Horgie Submarine",
      imgSrc: "resource/cover.jpg",
      code: "B1023",
      price: "2800.00",
      qty: "20"
    },
    "MOS Special Submarine": {
      category: "Submarine",
      title: "MOS Special Submarine",
      imgSrc: "resource/cover.jpg",
      code: "B1024",
      price: "3000.00",
      qty: "20"
    }
  },
  fries: {
    "Steak Fries(Large)": {
      category: "Fries",
      title: "Steak Fries(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1025",
      price: 1200,
      qty: 20
    },
    "Steak Fries(Medium)": {
      category: "Fries",
      title: "Steak Fries(Medium)",
      imgSrc: "resource/cover.jpg",
      code: "B1026",
      price: 600,
      qty: 20
    },
    "French Fries(Large)": {
      category: "Fries",
      title: "French Fries(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1027",
      price: 800,
      qty: 20
    },
    "French Fries(Medium)": {
      category: "Fries",
      title: "Frech Fries(Medium)",
      imgSrc: "resource/cover.jpg",
      code: "B1028",
      price: 650,
      qty: 200
    },
    "French Fries(Small)": {
      category: "Fries",
      title: "French Fries(Small)",
      imgSrc: "resource/cover.jpg",
      code: "B1029",
      price: 450,
      qty: 20
    },
    "Sweet Potato Fries(Large)": {
      category: "Fries",
      title: "Sweet Potato Fries(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1030",
      price: 600,
      qty: 20
    },
  },
  pasta: {
    "Chicken and Cheese Pasta": {
      category: "Pasta",
      title: "Chicken and Cheese Pasta",
      imgSrc: "resource/cover.jpg",
      code: "B1031",
      price: 1600,
      qty: 20
    },
    "Chicken Penne Pasta": {
      category: "Pasta",
      title: "Chicken Penne Pasta",
      imgSrc: "resource/cover.jpg",
      code: "B1032",
      price: 1700,
      qty: 20
    },
    "Ground Turkey Pasta Bake": {
      category: "Pasta",
      title: "Ground Turkey Pasta Bake",
      imgSrc: "resource/cover.jpg",
      code: "B1033",
      price: 2900,
      qty: 20
    },
    "Creamy Shrimp Pasta": {
      category: "Pasta",
      title: "Creamy Shirmp Pasta",
      imgSrc: "resource/cover.jpg",
      code: "B1034",
      price: 2000,
      qty: 20
    },
    "Lemon Butter Pasta": {
      category: "Pasta",
      title: "Lemon Buttor Pasta",
      imgSrc: "resource/cover.jpg",
      code: "B1035",
      price: 950,
      qty: 20
    },
    "Tagliatella Pasta": {
      category: "Pasta",
      title: "Tagliatella Pasta",
      imgSrc: "resource/cover.jpg",
      code: "B1036",
      price: 2400,
      qty: 20
    },
    "Baked Ravioli": {
      category: "Pasta",
      title: "Baked Ravioli",
      imgSrc: "resource/cover.jpg",
      code: "B1037",
      price: 2000,
      qty: 20
    }
  },
  chicken: {
    "Fried Chicken(Small)": {
      category: "Chicken",
      title: "Fried Chicken(Small)",
      imgSrc: "resource/cover.jpg",
      code: "B1038",
      price: 1200,
      qty: 20
    },
    "Fried Chicken(Regular)": {
      category: "Chicken",
      title: "Fried Chicken(Regular)",
      imgSrc: "resource/cover.jpg",
      code: "B1039",
      price: 2300,
      qty: 20
    },
    "Fried Chicken(Large)": {
      category: "Chicken",
      title: "Fried Chicken(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1040",
      price: 3100,
      qty: 20
    },
    "Hot Wings(Large)": {
      category: "Chicken",
      title: "Hot Wings(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1041",
      price: 2400,
      qty: 20
    },
    "Devilled Chicken(Large)": {
      category: "Chicken",
      title: "Devilled Chicken(Large)",
      imgSrc: "resource/cover.jpg",
      code: "B1042",
      price: 900,
      qty: 20
    },
    "BBQ Chicken(Regular)": {
      category: "Chicken",
      title: "BBQ Chicken(Regular)",
      imgSrc: "resource/cover.jpg",
      code: "B1043",
      price: 2100,
      qty: 20
    }
  },
  beverages: {
    "Pepsi330ml": {
      category: "Beverages",
      title: "Pepsi(330ml)",
      imgSrc: "resource/cover.jpg",
      code: "B1044",
      price: 990,
      qty: 20
    },
    "Coca-Cola(330ml)": {
      category: "Beverages",
      title: "Coca-Cola(330ml)",
      imgSrc: "resource/cover.jpg",
      code: "B1045",
      price: 1230,
      qty: 20
    },
    "Sprite(330ml)": {
      category: "Beverages",
      title: "Sprite(330ml)",
      imgSrc: "resource/cover.jpg",
      code: "B1046",
      price: 1500,
      qty: 20
    },
    "Mirinda(330ml)": {
      category: "Beverages",
      title: "Mirinda(330ml)",
      imgSrc: "resource/cover.jpg",
      code: "B1047",
      price: 850,
      qty: 20
    }
  }
};

function clearDropDown() {
  document.getElementById('drop-down-menu-burger').innerHTML = '';
  document.getElementById('drop-down-menu-submarine').innerHTML = '';
  document.getElementById('drop-down-menu-fries').innerHTML = '';
  document.getElementById('drop-down-menu-pasta').innerHTML = '';
  document.getElementById('drop-down-menu-chicken').innerHTML = '';
  document.getElementById('drop-down-menu-beverages').innerHTML = '';
}

// Add items to dropdowns
function populateDropdowns() {

  const burgerDropdown = document.getElementById('drop-down-menu-burger');
  const submarineDropdown = document.getElementById('drop-down-menu-submarine');
  const friesDropdown = document.getElementById('drop-down-menu-fries');
  const pastaDropdown = document.getElementById('drop-down-menu-pasta');
  const chickenDropdown = document.getElementById('drop-down-menu-chicken');
  const beveragesDropdown = document.getElementById('drop-down-menu-beverages');

  // Add Item to Burger DropDown
  for (const burger in items.burgers) {
    const listItem = document.createElement('li');
    const link = document.createElement('a');
    link.className = 'dropdown-item';
    link.href = '#cardContainerBurger';
    link.textContent = burger;
    link.addEventListener('click', () => updateCard(burger, 'burgers'));
    listItem.appendChild(link);
    burgerDropdown.appendChild(listItem);
  }

  // Add Item to Sub DropDown
  for (const submarine in items.submarine) {
    const listItem = document.createElement('li');
    const link = document.createElement('a');
    link.className = 'dropdown-item';
    link.href = '#cardContainerSubmarine';
    link.textContent = submarine;
    link.addEventListener('click', () => updateCard(submarine, 'submarine'));
    listItem.appendChild(link);
    submarineDropdown.appendChild(listItem);
  }

  // Add Item to Fries DropDown
  for (const fry in items.fries) {
    const listItem = document.createElement('li');
    const link = document.createElement('a');
    link.className = 'dropdown-item';
    link.href = '#cardContainerFries';
    link.textContent = fry;
    link.addEventListener('click', () => updateCard(fry, 'fry'));
    listItem.appendChild(link);
    friesDropdown.appendChild(listItem);
  }

  // Add Item to Pasta DropDown
  for (const pasta in items.pasta) {
    const listItem = document.createElement('li');
    const link = document.createElement('a');
    link.className = 'dropdown-item';
    link.href = '#cardContainerPasta';
    link.textContent = pasta;
    link.addEventListener('click', () => updateCard(pasta, 'pasta'));
    listItem.appendChild(link);
    pastaDropdown.appendChild(listItem);
  }

  // Add Item to Chicken DropDown
  for (const chicken in items.chicken) {
    const listItem = document.createElement('li');
    const link = document.createElement('a');
    link.className = 'dropdown-item';
    link.href = '#cardContainerChicken';
    link.textContent = chicken;
    link.addEventListener('click', () => updateCard(chicken, 'chicken'));
    listItem.appendChild(link);
    chickenDropdown.appendChild(listItem);
  }

  // Add Item to Beverages DropDown
  for (const beverage in items.beverages) {
    const listItem = document.createElement('li');
    const link = document.createElement('a');
    link.className = 'dropdown-item';
    link.href = '#cardContainerBeverages';
    link.textContent = beverage;
    link.addEventListener('click', () => updateCard(beverage, 'beverage'));
    listItem.appendChild(link);
    beveragesDropdown.appendChild(listItem);
  }

}

// Update the card
function updateCard(itemName, category) {
  const itemData = items[category][itemName];
  document.getElementById('cardTitle').textContent = itemName;
  document.getElementById('cardCode').textContent = itemData.code;
  document.getElementById('cardImage').src = itemData.imgSrc;
  document.getElementById('price').textContent = itemData.price
  document.getElementById('qty').textContent = itemData.qty;
}

// Display all items in cards
function displayAllItems() {
  const cardContainerBurger = document.getElementById('cardContainerBurger');
  const cardContainerSubmarine = document.getElementById('cardContainerSubmarine');
  const cardContainerFries = document.getElementById('cardContainerFries');
  const cardContainerPasta = document.getElementById('cardContainerPasta');
  const cardContainerChicken = document.getElementById('cardContainerChicken');
  const cardContainerBeverages = document.getElementById('cardContainerBeverages');

  cardContainerBurger.innerHTML = ''; 
  cardContainerSubmarine.innerHTML = '';
  cardContainerFries.innerHTML = '';
  cardContainerPasta.innerHTML = '';
  cardContainerChicken.innerHTML = '';
  cardContainerBeverages.innerHTML = '';

  // Create burger cards
  for (const burger in items.burgers) {
    const itemData = items.burgers[burger];
    const card = createCard(burger, itemData);
    cardContainerBurger.appendChild(card);
  }

  // Create submarine cards
  for (const submarine in items.submarine) {
    const itemData = items.submarine[submarine];
    const card = createCard(submarine, itemData);
    cardContainerSubmarine.appendChild(card);
  }

  // Create fries cards
  for (const fry in items.fries) {
    const itemData = items.fries[fry];
    const card = createCard(fry, itemData);
    cardContainerFries.appendChild(card);
  }

  // Create pasta cards
  for (const pasta in items.pasta) {
    const itemData = items.pasta[pasta];
    const card = createCard(pasta, itemData);
    cardContainerPasta.appendChild(card);
  }

  // Create chicken cards
  for (const chicken in items.chicken) {
    const itemData = items.chicken[chicken];
    const card = createCard(chicken, itemData);
    cardContainerChicken.appendChild(card);
  }

  // Create beverage cards
  for (const beverage in items.beverages) {
    const itemData = items.beverages[beverage];
    const card = createCard(beverage, itemData);
    cardContainerBeverages.appendChild(card);
  }
}

// Create a card element
function createCard(title, itemData) {
  const cardDiv = document.createElement('div');
  cardDiv.className = 'col';
  cardDiv.innerHTML = `
              <div class="card mt-4 " style="width: 18rem;">
                  <img src="${itemData.imgSrc}" class="card-img-top" alt="${title}">
                  <div class="card-body ">
                      <h5 class="card-title">${title}</h5>
                      <p class="card-text">${itemData.code}</p>
                      <p class="card-text">${itemData.price}</p>
                      <p class="card-text">Quantity in stock: <span>${itemData.qty}</span></p>
                      <button class="btn btn-danger delete-btn">Delete</button>
                      <button class="btn btn-warning update-btn" data-bs-toggle="modal" data-bs-target="#updateItemModal">Update</button>
                  </div>
              </div>
          `;

  const deleteButton = cardDiv.querySelector('.delete-btn');
  deleteButton.addEventListener('click', function () {
    deleteItem(title);
  });

  const updateButton = cardDiv.querySelector('.update-btn');
  updateButton.addEventListener('click', function () {
    openUpdateModal(title, itemData);
  });
  return cardDiv;
}

function deleteItem(itemName) {
  // Determine if the item is a burger or submarine based on its existence in the items object
  if (items.burgers[itemName]) {
    delete items.burgers[itemName]; // Remove the burger
  } else if (items.submarine[itemName]) {
    delete items.submarine[itemName]; // Remove the submarine
  } else if (items.pasta[itemName]) {
    delete items.pasta[itemName]; // Remove the submarine
  } else if (items.fries[itemName]) {
    delete items.fries[itemName]; // Remove the submarine
  } else if (items.chicken[itemName]) {
    delete items.chicken[itemName]; // Remove the submarine
  } else if (items.beverages[itemName]) {
    delete items.beverages[itemName]; // Remove the submarine
  }

  populateDropdowns();
  displayAllItems();
}


function openUpdateModal(itemName, itemData) {
  
  document.getElementById('updateItemName').value = itemName;
  document.getElementById('updateItemCode').value = itemData.code;
  document.getElementById('updateItemPrice').value = itemData.price;
  document.getElementById('updateItemQuantity').value = itemData.qty;



  switch (itemData.category) {
    case 'Burgers':
      document.getElementById('updateItemCategory').value = 'burgers';
      break;
    case 'Submarine':
      document.getElementById('updateItemCategory').value = 'submarine';
      break;
    case 'Fries':
      document.getElementById('updateItemCategory').value = 'fries';
      break;
    case 'Pasta':
      document.getElementById('updateItemCategory').value = 'pasta';
      break;
    case 'Chicken':
      document.getElementById('updateItemCategory').value = 'chicken';
      break;
    case 'Beverages':
      document.getElementById('updateItemCategory').value = 'beverages';
      break;
  }


}

// Function to update 
function updateItem() {
  const itemName = document.getElementById('updateItemName').value;
  const itemCode = document.getElementById('updateItemCode').value;
  const itemQuantity = document.getElementById('updateItemQuantity').value;
  const itemCategory = document.getElementById('updateItemCategory').value;
  const itemPrice = document.getElementById('updateItemPrice').value;

  console.log(items[itemCategory]);
  // Update the item in the items object
  items[itemCategory][itemName].code = itemCode;
  items[itemCategory][itemName].qty = itemQuantity;
  items[itemCategory][itemName].price = itemPrice;

  displayAllItems();
  populateDropdowns();

  const modal = bootstrap.Modal.getInstance(document.getElementById('updateItemModal'));
  modal.hide();
}

document.getElementById('updateItemForm').addEventListener('submit', function (event) {
  event.preventDefault();
  updateItem();
});


// Add new item 
document.getElementById('addItemForm').addEventListener('submit', function (event) {
  event.preventDefault();

  const itemCategory = document.getElementById('itemCategory').value;
  const itemName = document.getElementById('itemName').value;
  const itemCode = document.getElementById('itemCode').value;
  const itemPrice = document.getElementById('itemPrice').value;
  const itemImage = document.getElementById('imagePreview').src;
  const itemQuantity = document.getElementById('itemQuantity').value;

  // Add new item to the category
  items[itemCategory][itemName] = {
    code: itemCode,
    price: itemPrice,
    imgSrc: itemImage,
    qty: itemQuantity
  };

  clearDropDown();
  populateDropdowns();
  displayAllItems();

 
  bootstrap.Modal.getInstance(document.getElementById('addItemModal')).hide;
  
});

// Image preview for new item
document.getElementById('itemImage').addEventListener('change', function (event) {
  const file = event.target.files[0];
  const reader = new FileReader();

  reader.onload = function (e) {
    const imgPreview = document.getElementById('imagePreview');
    imgPreview.src = e.target.result;
    imgPreview.style.display = 'block';
  };

  if (file) {
    reader.readAsDataURL(file);
  }
});

populateDropdowns();
displayAllItems();

const customers = [];
let cusId = 1;

document.getElementById("addCustomerForm").addEventListener("submit", function (event) {
  event.preventDefault();
  const customerData = {
    customerId: cusId,
    name: document.getElementById("customerName").value,
    phone: document.getElementById("customerPhoneNumber").value,
    address: document.getElementById("customerAddress").value
  }
  cusId++;

  customers.push(customerData);
  console.log(customers);

});


function loadTable() {
  let tblCustomer = document.getElementById("viewCustomer");

  let tblBody = `<tr>
                    <td>Customer Id</td>
                    <td>Customer Name</td>
                    <td>Customer Phone Number</td>
                    <td>Customer Address</td>
                 </tr>`;

  customers.forEach(customer=>{
    tblBody+=`<tr>
                <td>${customer.customerId}</td>
                <td>${customer.name}</td>
                <td>${customer.phone}</td>
                <td>${customer.address}</td>
              </tr>`;
              
  });
  tblCustomer.innerHTML=tblBody;               
}

document.getElementById("viewCustomerModal").addEventListener('click',()=>{
    loadTable();
})




